<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# judge

```go
import "github.com/TrueHopolok/braincode-/judge"
```

## Index

- [func AppendChecker\(c OutputChecker, b \[\]byte\) \(\[\]byte, error\)](<#AppendChecker>)
- [func AppendGenerator\(g InputGenerator, b \[\]byte\) \(\[\]byte, error\)](<#AppendGenerator>)
- [func CalculateScore\(v \[\]\[\]Verdict\) float64](<#CalculateScore>)
- [func MarshalChecker\(c OutputChecker\) \(\[\]byte, error\)](<#MarshalChecker>)
- [func MarshalGenerator\(g InputGenerator\) \(\[\]byte, error\)](<#MarshalGenerator>)
- [type InputGenerator](<#InputGenerator>)
  - [func CombineGenerators\(gens ...InputGenerator\) InputGenerator](<#CombineGenerators>)
  - [func NewBFGenerator\(source string\) \(InputGenerator, error\)](<#NewBFGenerator>)
  - [func NewListGenerator\(tests \[\]\[\]string\) InputGenerator](<#NewListGenerator>)
  - [func NewLuaGenerator\(source string\) InputGenerator](<#NewLuaGenerator>)
  - [func UnmarshalGenerator\(b \[\]byte\) \(InputGenerator, error\)](<#UnmarshalGenerator>)
- [type Judge](<#Judge>)
  - [func NewJudge\(workers int\) Judge](<#NewJudge>)
  - [func \(j Judge\) Close\(\) error](<#Judge.Close>)
  - [func \(j Judge\) Judge\(p Problem, submition string\) \[\]\[\]Verdict](<#Judge.Judge>)
- [type OutputChecker](<#OutputChecker>)
  - [func NewBFChecker\(source string\) \(OutputChecker, error\)](<#NewBFChecker>)
  - [func NewBFSolution\(source string, instructions, steps, memory int\) \(OutputChecker, error\)](<#NewBFSolution>)
  - [func NewListSolution\(answers iter.Seq2\[string, string\]\) OutputChecker](<#NewListSolution>)
  - [func NewListSolutionSlice\(answers ...Pair\) OutputChecker](<#NewListSolutionSlice>)
  - [func NewLuaChecker\(source string\) \(OutputChecker, error\)](<#NewLuaChecker>)
  - [func UnmarshalChecker\(b \[\]byte\) \(OutputChecker, error\)](<#UnmarshalChecker>)
- [type Pair](<#Pair>)
- [type Problem](<#Problem>)
  - [func NewProblem\(doc ml.Document\) \(Problem, error\)](<#NewProblem>)
  - [func \(p \*Problem\) AppendBinary\(buf \[\]byte\) \(\[\]byte, error\)](<#Problem.AppendBinary>)
  - [func \(p \*Problem\) MarshalBinary\(\) \(\[\]byte, error\)](<#Problem.MarshalBinary>)
  - [func \(p \*Problem\) UnmarshalBinary\(buf \[\]byte\) error](<#Problem.UnmarshalBinary>)
- [type Status](<#Status>)
  - [func \(i Status\) String\(\) string](<#Status.String>)
- [type Verdict](<#Verdict>)
  - [func \(v Verdict\) Error\(\) string](<#Verdict.Error>)


<a name="AppendChecker"></a>
## func [AppendChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L128>)

```go
func AppendChecker(c OutputChecker, b []byte) ([]byte, error)
```



<a name="AppendGenerator"></a>
## func [AppendGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L60>)

```go
func AppendGenerator(g InputGenerator, b []byte) ([]byte, error)
```



<a name="CalculateScore"></a>
## func [CalculateScore](<https://github.com/TrueHopolok/braincode-/blob/main/judge/judge.go#L69>)

```go
func CalculateScore(v [][]Verdict) float64
```

CalculateScore is a helper function to calculate score of a given verdict set. Returned value is NaN for zero length v and in range \[0, 1\] in all other cases.

Test group is only counted if all tests in a group pass.

<a name="MarshalChecker"></a>
## func [MarshalChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L124>)

```go
func MarshalChecker(c OutputChecker) ([]byte, error)
```



<a name="MarshalGenerator"></a>
## func [MarshalGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L56>)

```go
func MarshalGenerator(g InputGenerator) ([]byte, error)
```



<a name="InputGenerator"></a>
## type [InputGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/types.go#L32-L34>)



```go
type InputGenerator interface {
    GenerateInput() ([][]string, error)
}
```

<a name="CombineGenerators"></a>
### func [CombineGenerators](<https://github.com/TrueHopolok/braincode-/blob/main/judge/listgen.go#L28>)

```go
func CombineGenerators(gens ...InputGenerator) InputGenerator
```



<a name="NewBFGenerator"></a>
### func [NewBFGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/bfgen.go#L24>)

```go
func NewBFGenerator(source string) (InputGenerator, error)
```

NewBFGenerator creates a new brainfunk input generator.

#### Expected brainfunk API

There will be no input provided. First output byte will be used as a group delimiter, second as a test delimiter. Delimiters cannot be the same. After that one or more groups of test may be provided.

Tests must be separated by test delimiter. Groups must be separated by group delimiter. No terminating delimiter is required if last test is not empty.

There is a hard cap of 1 billion steps and 64MiB memory. These may change in future versions.

<a name="NewListGenerator"></a>
### func [NewListGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/listgen.go#L6>)

```go
func NewListGenerator(tests [][]string) InputGenerator
```

NewListGenerator creates a generator that simply returns tests without modification.

<a name="NewLuaGenerator"></a>
### func [NewLuaGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/luagen.go#L9>)

```go
func NewLuaGenerator(source string) InputGenerator
```

NewLuaGenerator create a new generator from lua source code. See \[lua.GetTests\] for details.

<a name="UnmarshalGenerator"></a>
### func [UnmarshalGenerator](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L66>)

```go
func UnmarshalGenerator(b []byte) (InputGenerator, error)
```



<a name="Judge"></a>
## type [Judge](<https://github.com/TrueHopolok/braincode-/blob/main/judge/judge.go#L19-L21>)

Judge is a handle to a pool of goroutines ready to judge submissions.

Judge must be closed to free up resources.

Judge is safe for concurrent use. Zero value judge is invalid, use [NewJudge](<#NewJudge>) instead.

```go
type Judge struct {
    // contains filtered or unexported fields
}
```

<a name="NewJudge"></a>
### func [NewJudge](<https://github.com/TrueHopolok/braincode-/blob/main/judge/judge.go#L27>)

```go
func NewJudge(workers int) Judge
```

NewJudge creates a new judge and allocates workers. At least one worker will be allocated to prevent a deadlock.

Judge must be closed to free up resources.

<a name="Judge.Close"></a>
### func \(Judge\) [Close](<https://github.com/TrueHopolok/braincode-/blob/main/judge/judge.go#L39>)

```go
func (j Judge) Close() error
```

Frees worker pool of the judge. Never returns an error. Signature matches [io.Closer](<https://pkg.go.dev/io/#Closer>).

<a name="Judge.Judge"></a>
### func \(Judge\) [Judge](<https://github.com/TrueHopolok/braincode-/blob/main/judge/judge.go#L94>)

```go
func (j Judge) Judge(p Problem, submition string) [][]Verdict
```

Judge judges a problem against a solution and returns a verdict.

Judge may return a singular verdict \[\]\[\]Verdict\{\{value\}\} if

- submition is not valid brainfunk
- input generation failed
- on any other judge failure \(should be unreachable, but who knows\)

<a name="OutputChecker"></a>
## type [OutputChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/types.go#L36-L38>)



```go
type OutputChecker interface {
    CheckOutput(input string, output string) Verdict
}
```

<a name="NewBFChecker"></a>
### func [NewBFChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/bfcheck.go#L21>)

```go
func NewBFChecker(source string) (OutputChecker, error)
```

NewBFChecker creates a new brainfunk output checker.

\# Expected brainfunk API Standard input will be test input and test output separated by a 0. No output signifies a passes test, any other output will be used as comment.

Not all programs can be tested with this api, for this use [NewLuaChecker](<#NewLuaChecker>), you freak.

<a name="NewBFSolution"></a>
### func [NewBFSolution](<https://github.com/TrueHopolok/braincode-/blob/main/judge/bfcheck.go#L106>)

```go
func NewBFSolution(source string, instructions, steps, memory int) (OutputChecker, error)
```



<a name="NewListSolution"></a>
### func [NewListSolution](<https://github.com/TrueHopolok/braincode-/blob/main/judge/listcheck.go#L13>)

```go
func NewListSolution(answers iter.Seq2[string, string]) OutputChecker
```

NewListSolution creates a new table driven test checker. Input must map input to output. Output must match exactly. Checker will fail for any input not present in answers.

<a name="NewListSolutionSlice"></a>
### func [NewListSolutionSlice](<https://github.com/TrueHopolok/braincode-/blob/main/judge/listcheck.go#L23>)

```go
func NewListSolutionSlice(answers ...Pair) OutputChecker
```

NewListSolutionSlice is NewListSolution wrapper that does not use iterators.

<a name="NewLuaChecker"></a>
### func [NewLuaChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/luacheck.go#L9>)

```go
func NewLuaChecker(source string) (OutputChecker, error)
```

NewLuaChecker creates a new lua checker. See \[lua.NewChecker\] for details.

<a name="UnmarshalChecker"></a>
### func [UnmarshalChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L134>)

```go
func UnmarshalChecker(b []byte) (OutputChecker, error)
```



<a name="Pair"></a>
## type [Pair](<https://github.com/TrueHopolok/braincode-/blob/main/judge/listcheck.go#L17-L20>)



```go
type Pair struct {
    Input  string
    Output string
}
```

<a name="Problem"></a>
## type [Problem](<https://github.com/TrueHopolok/braincode-/blob/main/judge/judge.go#L56-L63>)

Problem is a collection of metadata about a problem. It should be constructed directly.

```go
type Problem struct {
    InputGenerator
    OutputChecker

    Instructions int // Maximum number of active instructions.
    Steps        int // Maximum number of steps of execution.
    Memory       int // Maximum number of allocated bytes during the execution.
}
```

<a name="NewProblem"></a>
### func [NewProblem](<https://github.com/TrueHopolok/braincode-/blob/main/judge/ml.go#L13>)

```go
func NewProblem(doc ml.Document) (Problem, error)
```



<a name="Problem.AppendBinary"></a>
### func \(\*Problem\) [AppendBinary](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L154>)

```go
func (p *Problem) AppendBinary(buf []byte) ([]byte, error)
```



<a name="Problem.MarshalBinary"></a>
### func \(\*Problem\) [MarshalBinary](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L150>)

```go
func (p *Problem) MarshalBinary() ([]byte, error)
```



<a name="Problem.UnmarshalBinary"></a>
### func \(\*Problem\) [UnmarshalBinary](<https://github.com/TrueHopolok/braincode-/blob/main/judge/serialization.go#L173>)

```go
func (p *Problem) UnmarshalBinary(buf []byte) error
```



<a name="Status"></a>
## type [Status](<https://github.com/TrueHopolok/braincode-/blob/main/judge/types.go#L6>)



```go
type Status uint
```

<a name="StatusAccept"></a>

```go
const (
    StatusAccept Status = iota
    StatusCompilationFailed
    StatusRuntimeError
    StatusSourceSizeLimit
    StatusTimeLimit
    StatusMemoryLimit
    StatusWrongAnswer
    StatusCheckerFailed
    StatusJudgeFailed
)
```

<a name="Status.String"></a>
### func \(Status\) [String](<https://github.com/TrueHopolok/braincode-/blob/main/judge/status_string.go#L26>)

```go
func (i Status) String() string
```



<a name="Verdict"></a>
## type [Verdict](<https://github.com/TrueHopolok/braincode-/blob/main/judge/types.go#L20-L23>)



```go
type Verdict struct {
    Status  Status
    Comment string
}
```

<a name="Verdict.Error"></a>
### func \(Verdict\) [Error](<https://github.com/TrueHopolok/braincode-/blob/main/judge/types.go#L25>)

```go
func (v Verdict) Error() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
