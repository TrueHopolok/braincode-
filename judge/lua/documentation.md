<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# lua

```go
import "github.com/TrueHopolok/braincode-/judge/lua"
```

Package lua implements \[judge.InputGenerator\] and \[judge.OutputChecker\] for lua programs.

## Index

- [Variables](<#variables>)
- [func GetTests\(source string\) \(\[\]\[\]string, error\)](<#GetTests>)
- [type Checker](<#Checker>)
  - [func NewChecker\(source string\) \(Checker, error\)](<#NewChecker>)
  - [func \(c Checker\) AppendBinary\(b \[\]byte\) \(\[\]byte, error\)](<#Checker.AppendBinary>)
  - [func \(c Checker\) CheckOutput\(input, output string\) \(string, error\)](<#Checker.CheckOutput>)
  - [func \(c \*Checker\) MarshalBinary\(\) \(data \[\]byte, err error\)](<#Checker.MarshalBinary>)
  - [func \(c \*Checker\) UnmarshalBinary\(data \[\]byte\) error](<#Checker.UnmarshalBinary>)


## Variables

<a name="ErrNotAChecker"></a>

```go
var ErrNotAChecker = errors.New("not a checker")
```

<a name="GetTests"></a>
## func [GetTests](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/gen.go#L37>)

```go
func GetTests(source string) ([][]string, error)
```

GetTests extracts tests from lua source.

Tests can be provided in of 2 ways.

### Static tests

```
# singular test
test_data = "abc"

# multiple tests without groups
test_data = {"1", "2", "3"}

# multiple tests with subgroup
test_data = {{"1", "2"}, {"3", "4"}, nil, "5"}

# same as this
test_data = {{"1", "2"}, {"3", "4"}, {"5"}}
```

Only strings and nils are allowed. Nils are silently dropped.

### Dynamic tests

A function called test\_data may be provided. It will be called with zero arguments and must return a string | \(nil | string | \(nil | string\)\[\]\)\[\]

<a name="Checker"></a>
## type [Checker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/check.go#L42-L46>)

Checker contains a parsed lua script to be used for checking solutions to a problem.

Script is sandboxed and global state is wiped between tests. Standard output is be captured and used as additional checker comments.

Following formats are accepted:

### Solution mode

A function with signature solution\(input\) must be defined. It must return a string. It will be called with appropriate test input. Test will fail if submition result differs from the string returned from solution. Great for problems with singular answer.

### Checker mode

A function with signature checker\(input, output\) must be defined. Test input and submition output will be passes to the function, and it must decide if the test fails.

- no return value, nil, empty string or false are considered a successful test.
- true value is considered a failure without comment.
- any other value is considered a comment, will be stringified using tostring\(\) and passes to the judge.

Checker mode is always preferred over solution mode. At least one of 2 functions must be defined.

Zero value checker is invalid, use [NewChecker](<#NewChecker>) to construct one. It is safe to copy and use concurrently, because it is immutable.

```go
type Checker struct {
    // contains filtered or unexported fields
}
```

<a name="NewChecker"></a>
### func [NewChecker](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/check.go#L51>)

```go
func NewChecker(source string) (Checker, error)
```

NewChecker parses source and creates a new Checker.

<a name="Checker.AppendBinary"></a>
### func \(Checker\) [AppendBinary](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/check.go#L158>)

```go
func (c Checker) AppendBinary(b []byte) ([]byte, error)
```



<a name="Checker.CheckOutput"></a>
### func \(Checker\) [CheckOutput](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/check.go#L97>)

```go
func (c Checker) CheckOutput(input, output string) (string, error)
```

CheckOutput runs the checker. Non nil error means that checker has failed. If error is nil, string can be examined for test result. If string is empty, test passes. Otherwise, string will contain a possibly multiline checker comment.

<a name="Checker.MarshalBinary"></a>
### func \(\*Checker\) [MarshalBinary](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/check.go#L165>)

```go
func (c *Checker) MarshalBinary() (data []byte, err error)
```



<a name="Checker.UnmarshalBinary"></a>
### func \(\*Checker\) [UnmarshalBinary](<https://github.com/TrueHopolok/braincode-/blob/main/judge/lua/check.go#L169>)

```go
func (c *Checker) UnmarshalBinary(data []byte) error
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
